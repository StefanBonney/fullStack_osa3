(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){},17:function(e,t,n){e.exports=n(42)},42:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(11),s=n.n(r),i=n(12),u=n(13),l=n(15),c=n(14),m=n(16),h=function(e){e.id;var t=e.name,n=e.number;return o.a.createElement("p",null,t," ",n)},p=n(2),f=n.n(p),d="/api/persons",v={getAll:function(){return f.a.get(d).then(function(e){return e.data})},create:function(e){return f.a.post(d,e).then(function(e){return e.data})},remove:function(e){var t=d+"/"+e;return console.log(t),f.a.delete(t).then(function(e){return e.data})},update:function(e,t){return f.a.put("".concat(d,"/").concat(e),t).then(function(e){return e.data})}},E=function(e){var t=e.ilmoitus;return o.a.createElement("h3",{className:"notification"},t)},g=(n(10),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).addPerson=function(t){t.preventDefault();var n={name:e.state.newName,number:e.state.newNumber},a=n.name;if(!1===e.state.persons.map(function(e){return e.name}).includes(a))v.create(n).then(function(t){e.setState({persons:e.state.persons.concat(t),newName:"",newNumber:"",ilmoitus:"Lis\xe4ttiin henkil\xf6 ".concat(n.name)}),setTimeout(function(){e.setState({ilmoitus:""})},5e3)});else{var o=e.state.persons.map(function(e){return e.name}).indexOf(n.name),r=e.state.persons[o],s=r.id;window.confirm(r.name+" on jo luettelossa, korvataanko vanha numero uudella?"),e.setState({persons:e.state.persons.filter(function(e){return e.id!==r.id})}),v.update(s,n).then(function(t){console.log("in personService update"),e.setState({persons:e.state.persons.concat(t),newName:"",newNumber:"",ilmoitus:"P\xe4ivitettiin henkil\xf6 ".concat(n.name)}),console.log("in personService update"),setTimeout(function(){e.setState({ilmoitus:""})},5e4)}).catch(function(t){console.log(t),alert("'".concat(r.name,"' on jo valitettavasti poistettu")),e.setState({persons:e.state.persons.filter(function(e){return e.id!==s})})})}},e.deletePerson=function(t){console.log(t),v.remove(t).then(function(n){e.setState({persons:e.state.persons.filter(function(e){return e.id!==t}),ilmoitus:"Poistettiin henkil\xf6 jonka id '".concat(t,"'")}),setTimeout(function(){e.setState({ilmoitus:null})},5e3)})},e.handleNameChange=function(t){console.log(t.target.value),e.setState({newName:t.target.value})},e.handleNumberChange=function(t){console.log(t.target.value),e.setState({newNumber:t.target.value})},e.handleRajaaChange=function(t){var n=t.target.value,a=e.state.persons.filter(function(e){return e.name.toLowerCase().includes(n)});e.setState({rajaaName:t.target.value,personsToShow:a})},e.personList=function(){return o.a.createElement("ul",null,e.state.persons.map(function(t){return o.a.createElement("div",null,o.a.createElement(h,{name:t.name,number:t.number}),o.a.createElement("button",{onClick:function(){e.deletePerson(t.id)}},"x"))}))},e.state={persons:[],newName:"",newNumber:"",ilmoitus:"",rajaaName:"",personsToShow:[]},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;console.log("1:PERSONS",this.state.persons),v.getAll().then(function(t){e.setState({persons:t})}),console.log("2:PERSONS",this.state.persons)}},{key:"render",value:function(){var e=this;console.log(this.state.rajaaname);var t=this.state.rajaaName?this.state.personsToShow:this.state.persons,n=this.state.persons;return console.log("3:PERSONS",n),o.a.createElement("div",null,o.a.createElement("h1",null,"Puhelinluettelo"),o.a.createElement("form",null,o.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",o.a.createElement("input",{value:this.state.rajaaName,onChange:this.handleRajaaChange})),o.a.createElement("br",null)),o.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),o.a.createElement("form",{onSubmit:this.addPerson},o.a.createElement("div",null,"nimi: ",o.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),o.a.createElement("div",null,"numero: ",o.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),o.a.createElement("h2",null,"Numerot"),o.a.createElement(E,{ilmoitus:this.state.ilmoitus}),o.a.createElement("ul",null,t.map(function(t){return o.a.createElement("div",{key:t.id},o.a.createElement(h,{name:t.name,number:t.number}),o.a.createElement("button",{onClick:function(){e.deletePerson(t.id)}},"x"))})))}}]),t}(o.a.Component));s.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.c98d1356.chunk.js.map